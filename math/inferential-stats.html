<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Inferential Statistics</title>
</head>
<body>
    <h1>Inferential Statistics</h1>

    <h2>Basics</h2>
    <ul>
        <li>Descriptive statistics tells us about data we have, and inferential statistics helps us infer information about a larger population based on a smaller sample of that population.  Often we don't have access to data about an entire population to do descriptive statistics on and we have to use a smaller sample of it.  This includes hypothesis testing and regression.</li>
        <li>A big part of it is understanding that samples don't always represent the population accurately and part of inferential statistics is quantifying that uncertainty.</li>
    </ul>
    
    <h2>Basics of Hypothesis Testing</h2>
    <ul>
        <li><strong>Hypothesis Testing</strong> is a framework for answering questions about datasets probablistically.</li>
        <ul>
            <li><strong>Step 1:</strong> Ask a question. e.g. say a group of students took a test prep course and ended up with a higher average test score than all students taking the test.  Did this group really outperform their peers or was it just random chance?</li>
            <li><strong>Step 2:</strong> Define the null and alternative hypotheses. This reframes the question more precisely into two competing hypotheses and should always be specified before data collection/experimentation.  e.g. the null hypothesis would be that the group of students is a random sample from the population of all students and the fact that they had a higher average score was random chance (because the mean of any sample of the same size from the population will follow a sampling distribution of the mean and some sample will be above or below the population mean).  The alternative hypothesis is that the group is from a different population than all the other students, i.e. the test taking population is actually two separate populations: ones that took the test prep course and ones that didn't.  We specify in the alternative hypothesis whether we think this second population's mean is greater than, less than, or not equal to (either less than or greater than) the first population of students who didn't take the test prep course.</li>
            <li><strong>Step 3:</strong> Determine the null distribution.  e.g. Using the Central Limit Theorem, you can create the sampling distribution of the mean for samples of the size of the group of students who took the test prep course.  You know this distribution will be centered around the population mean, and you be able to estimate the standard deviation (aka standard error) of the sampling distribution.  This gives you information about often you expect samples to have a given mean - most will be close to the population mean, but you will expect to get some samples to be further from the population mean by random chance.</li>
            <li><strong>Step 4:</strong><p>Calculate a P-value (or confidence interval). This is where you ask the basic question of the hypothesis test: how likely is the observed sample statistic if the null hypothesis is true?  This is expressed as a probability called the p-value between 0 and 1 (0 being unlikely and 1 being likely).  The answer depends on which type of alternative hypothesis you used - if you said the second population's mean was greater than or less than the first you will have a one-sided or one-tailed test, but if you said it was simply not equal to the first than it is two-sided or two-tailed.  e.g. If your alternative hypothesis is that the test prep group of students comes from a different population whose mean score is greater than the first, you want to know what percentage of samples in the null distribution have a mean greater than or equal to the mean of the group of students who took the test prep course.  So, if the test prep group's mean is pretty far to the right in the sampling distribution you might have 3.1% of samples would be equal to or greater than it, and your p-value would be 0.031.</p>
            <img src="./samp_dist.svg" alt="">
                
            <p>Likewise, if your alternative hypothesis was that the test prep group comes from a different population whose mean is less than the first, you would say that 96.9% of sample means would be equal to or less than test prep group's mean if the null hypothesis is true, so your p-value is 0.969.</p>
            <img src="./samp_dist_lower.svg" alt="">

            <p>However, if your alternative hypotheis is that the test prep group is from a population simply with a different mean (either less than or greater to), then you want to know how likely is it that a random sample would be as far away from the population mean as the test prep group, and this is a two-tailed test where the p-value would be 0.062, twice as large as the first test.  This is the default for most functions in python and R</p>
            <img src="./samp_dist_2sided.svg" alt="">
            </li>
            <li><strong>Step 5:</strong> Interpret the results. Often we predefine a significance threshold, alpha, and if the p-value is less than that we say it is significant and reject the null hypothesis in favor of the alternative hypothesis, otherwise we say it is an insignificant p-value and do not reject the null hypothesis.  Alpha is an arbitrary choice, often 0.05, and it should be chosen before data collection/experimentation.  e.g. if our alpha is 0.05 and if our alternative hypothesis was that the test-prep group came from a different population with a higher mean, then since the p-value is 0.031 and less than alpha of 0.05, we would reject the null hypothesis.  We are saying since only 3.1% of values would be greater than or equal to the test-prep group mean if the null hypothesis were true, then it is improbable (though certainly not impossible) that the null hypothesis is true.  However, if our alternative hypothesis was that the test-prep group came from a population with simply a different mean, then we would not reject the null hypothesis because the p-value is 0.062, i.e. since 6.2% of samples would have a mean that far from the population mean, we don't think it is improbable to get a sample mean that far from the population mean.</li>
        </ul>
    </ul>

    <h2>One-Sample T-Tests</h2>
    <ul>
        <li><strong>One-Sample T-Tests</strong> are a type of hypothesis test for quantitative variables to compare a sample mean to a hypothetical population mean. You have one sample, and you wonder if it comes from a population with the hypothesized mean (the null hypothesis), or if it comes from a different population with a mean different than the hypothesized mean (the alternative hypothesis). e.g. Is the average time customers spend on a website different than 5 minutes?  Is the average amount of money spent in each purchase greater than 10 dollars?</li>
        <li><strong>Assumptions</strong> For a one-sample t-test to be valid, the following assumptions must be true: 1)The sample was randomly selected from the population (e.g. if you only have data on customers who agreed to share their information, this isn't a random sample of all site visitors and may differ from the population of all visitors), 2)Each observation in the sample is independent (e.g. if one customer convinces a friend to go buy the same thing, these observations are no longer independent), and 3)The population data is normally distributed or the sample size is large enough (e.g. usually large enough is at least 40 observations in the sample, but you should always plot your sample to see that it is roughly normal, not multi-modal, not skewed, not a lot of outliers)</li>
        <li><strong>Example</strong> Say you have 50 orders on a website in the past day, averaging $98 per order.  Say your goal is for the average order on the website to be $100, so your question is whether the average order is $100, based on this one sample of 50 orders out of the population of all orders.  The null hypothesis is that the average order is $100, and the alternative hypothesis is that the average order is not $100.  Using CLT, you determine the null distribution would be centered on $100, and using the standard deviation of the 50-order sample as an estimate of the population standard deviation, you can calculate the standard error on the null distribution.  This would allow you to calculate a p-value using a two-tailed test of getting a sample mean that is less than or equal to $98 or greater than or equal to $102.  Given a predefined significance threshold, you can can determine if your p-value is significant and if you should thus reject the null hypothesis or not.  If you don't reject it, then you're saying its more likely that the average order is $100 than not $100, and if you do reject it, then you're saying it's more likely that the average order is not $100 than it is to be $100.</li>
        <li><strong>SciPy Function</strong> Pythons scipy library has a one-sample t-test function (<code>from scipy.stats import ttest_1samp</code>).  You give it a data set as the first argument that is the sample data set, and then the hypothesized population mean as the second argument.  It does all the work for you and returns a t-stat and a p-value.  e.g. <code>tstat, pval = ttest_1samp(sample_distribution, expected_mean)</code>. It does a two-tailed test by default, i.e. assuming your hypothesis is simply that the mean is different than hypothesized value.</li>
    </ul>

    <h2>Binomial Tests</h2>
    <ul>
        <li><strong>Binomial Tests</strong> are used for binary categorical variables, to compare the frequency of an outcome in a sample to a hypothetical expected frequency.  So, the question is whether the sample frequency supports a hypothetical expected population frequency or not.  The null hypothesis is that the sample is a random sample from the population and the observed frequency of success in the sample only varies from the hypothesized population frequency due to random chance.  The alternative hypothesis will be that the sample does not come from a population with the hypothesized success frequency, more specifically that it comes from a population with a success frequency less than, greater than, or different from (less than or greater than) the hypothesized population with the hypothesized success frequency.  </li>
        <li><strong>Null Distribution</strong> Your sample is of size n, which corresponds to n trials being performed, and you hypothesize a probability of success p on each trial.  n*p is the hypothesized number of successes you should have in a sample on average if the null hypothesis is true.  If you took many samples of size n, then the number of successes in each sample could be plotted and it would follow the binomial distribution for n trials and probability of success p on each trial if the null hypothesis is true.  The mean of the distribution would be would be n*p if the null hypothesis is true, and variance n*p*(p-1).  So, you are interested in where the observed number of successes in your sample is in this null distribution.</li>
        <li><strong>P-value</strong> The p-value as usual depends on the alternative hypothesis and whether it is one-sided less than, greater than, or two-sided.  Just like with the one-sample t-test, you want to know what is the probability that your observered number of successes would occur in your null distribution.  You want to know either the probability of the observed value or less, the observed value or greater, or a distance from the mean in either direction equal to the distance of the observed value.  As usual, you will have a significance threshold like 0.05 to determine a cutoff for when you say the observed value is so unlikely that you reject the null hypothesis</li>
        <li><strong>Sample Frequency</strong> You may need to calculate the sample's success frequency for the binary categorical variable of interest.  For example, say you have a list of site visitors for the sample, and a purchase column with 'y' or 'n' depending on if they made a purchase.  Using python you could use <code>samp_size = len(visitors)</code> for the sample sizen , and <code>num_purchases = np.sum(visitors.purchase == 'y')</code> for the number of purchases made (Successes), you can divide the num_purchases by the samp_size to get a percent frequency of success for the sample, and you are interested in whether this frequency is consistent with a hypothesized propbability of success p on each trial which would on average produce p*n successes for a sample of size n.</li>
        <li><strong>SciPy Binomial Test</strong> The scipy library has a binomial testing function that does all the work for you (<code>from scipy import binom_test</code>).  It takes the observered number of successes in your sample, the number of trials (sample size), the hypothesized probability of success in each trial, and optionall a parameter to define wether the alternative hypothesis is 'less', 'greater', or 'not_equal' which by default is 'not_equal' if not included (two-sided test). It returns the p-value. e.g. <code>p_value = binom_test(2, n=10, p=0.5)</code> could be used for flipping a coin 10 times, and you only observed two heads.  It would do a two-sided test for observing either 2 or less heads, or 8 or more heads.  You could do just less than test with <code>p_value = binom_test(2, n=10, p=0.5, alternative='less')</code> which would have half the p-value as before because now its only asking the probability of observing two heads or less.</li>
    </ul>
</body>
</html>